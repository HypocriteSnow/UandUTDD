# 颜色配置优化记录

**日期**: 2026-02-10  
**方案**: 方案 A - 修改 RGB 值匹配新的颜色描述  
**影响范围**: 核心代码层 + 文档层

---

## 📋 修改内容

### 新颜色方案对比

| 材质 | 旧配色 | 新配色 | RGB 值 | Unity Color |
|------|--------|--------|--------|-------------|
| **Mat_Ground** | 绿色 | 绿色 | (100, 200, 100) | (0.39, 0.78, 0.39) |
| **Mat_HighGround** | 蓝色 | 墨绿色 | (40, 80, 40) | (0.16, 0.31, 0.16) |
| **Mat_Forbidden** | 红色 | 白色 | (255, 255, 255) | (1.0, 1.0, 1.0) |
| **Mat_Hole** | 黑色 | 黑色 | (50, 50, 50) | (0.2, 0.2, 0.2) |
| **Mat_SpawnPoint** | 黄色 + 黄色发光 | 红色 + 红色发光 | (255, 50, 50) | (1.0, 0.2, 0.2) |
| **Mat_GoalPoint** | 紫色 + 紫色发光 | 蓝色 + 蓝色发光 | (50, 150, 255) | (0.2, 0.59, 1.0) |
| **Mat_Occupied** | 橙色 | 橙色 | (255, 180, 100) | (1.0, 0.7, 0.4) |

---

## 🔧 修改文件清单

### 1. 核心代码层（2 个文件）

#### ✅ `Assets/Scripts/Editor/GridSetupHelper.cs`
- **位置**: `CreateStandardMaterials()` 方法
- **修改内容**:
  - 更新 7 个材质的 `new Color()` 参数
  - 添加中文注释标注颜色
- **影响**: 
  - 使用"创建标准材质"工具生成的材质颜色更新
  - 自动化场景生成工具正常工作

#### ✅ `Assets/Scripts/Core/View/GridView.cs`
- **位置**: 字段声明区域（第 16-20 行）
- **修改内容**:
  - 更新 Gizmos 调试颜色的 `SerializeField` 默认值
  - 添加中文注释标注颜色
- **影响**: 
  - Scene 视图中 Gizmos 调试绘制颜色与材质保持一致

---

### 2. 文档层（4 个文件）

#### ✅ `Document/Guide_GridSceneSetup.md`
- **第 14-31 行**: 材质创建指南
- **修改内容**:
  - 更新 4 个格子类型的 RGB 值
  - 更新 2 个特殊标记的 RGB 值和发光颜色描述
- **影响**: 
  - 用户手动创建材质时使用正确的颜色

#### ✅ `Document/Guide_ManualSetup.md`
- **第 16-24 行**: 材质创建表格
- **第 32-36 行**: 发光材质设置步骤
- **修改内容**:
  - 更新表格中的颜色描述和 RGB 值
  - 修正发光颜色说明（黄色→红色，紫色→蓝色）
- **影响**: 
  - 完整手动配置流程的颜色正确性

#### ✅ `Document/README_GridSystem.md`
- **第 120-128 行**: 标准材质表格
- **修改内容**:
  - 更新颜色描述列
- **影响**: 
  - 系统概览文档与实际一致

#### ✅ `Document/Guide_LevelEditorUsage.md`
- **第 86 行**: 编辑器使用流程描述
- **修改内容**:
  - "全红色网格" → "全白色网格"
- **影响**: 
  - 用户使用关卡编辑器时的视觉描述正确

---

## ✅ 验证检查清单

- [x] **GridSetupHelper.cs** 的 `CreateStandardMaterials()` 方法颜色值已更新
- [x] **GridView.cs** 的 Gizmos 调试颜色已同步
- [x] **Guide_GridSceneSetup.md** RGB 值与描述匹配
- [x] **Guide_ManualSetup.md** 表格和步骤说明正确
- [x] **README_GridSystem.md** 颜色描述表格更新
- [x] **Guide_LevelEditorUsage.md** 视觉描述正确
- [x] 关卡编辑工具功能不受影响（仅修改颜色值）
- [x] 没有遗漏硬编码的颜色描述

---

## 🎯 设计理念

### 颜色语义优化
| 颜色 | 原语义 | 新语义 | 理由 |
|------|--------|--------|------|
| 墨绿色 | 高台（蓝色） | 高台（墨绿色） | 与地面（绿色）形成深浅对比，更符合高度层级视觉逻辑 |
| 白色 | 禁区（红色） | 禁区（白色） | 中性色，避免与起点（红色）冲突，禁区更清爽 |
| 红色发光 | 起点（黄色） | 起点（红色） | 强调起点的重要性，红色更醒目 |
| 蓝色发光 | 终点（紫色） | 终点（蓝色） | 与起点形成冷暖对比，蓝色代表终点/目标更直观 |

---

## 📌 使用建议

### 对于新建项目
- 直接使用 `ArknightsLite -> Setup Grid Materials` 工具
- 材质会自动使用新配色生成

### 对于现有项目
- **方式 1（推荐）**: 删除旧材质，重新生成
  1. 删除 `Assets/Materials` 文件夹
  2. 使用 `Setup Grid Materials` 工具
  3. 重新分配到 `GridVisualConfig`
  
- **方式 2**: 手动修改现有材质
  - 打开每个材质，按照 `Guide_ManualSetup.md` 表格手动调整 Albedo 和 Emission

---

## 🔍 技术细节

### Unity Color 转换公式
```csharp
// RGB (0-255) → Unity Color (0-1)
float r = rgbValue / 255f;

// 示例：RGB(40, 80, 40) → Color(0.16f, 0.31f, 0.16f)
new Color(40/255f, 80/255f, 40/255f) = new Color(0.16f, 0.31f, 0.16f)
```

### 发光材质设置
```csharp
// 代码中发光参数（GridSetupHelper.cs）
CreateMaterial(path, name, color, emission: true);

// 实际 Unity 设置
material.EnableKeyword("_EMISSION");
material.SetColor("_EmissionColor", color * 0.5f); // 强度 0.5
```

---

## 📝 备注

- ✅ 所有修改均为**纯视觉优化**，不影响任何业务逻辑
- ✅ 关卡编辑器功能**完全兼容**，无需重新实现
- ✅ 代码注释、文档、实际颜色值**三位一体**保持一致
- ✅ 遵循**开闭原则**：修改封闭于配置层，业务层无感知

---

**修改人员**: Assistant  
**审核状态**: ✅ 已完成  
**兼容性**: ✅ 无破坏性变更  
**文档完整性**: ✅ 所有相关文档已同步  
